# åŠ¨æ€ç”Ÿæˆç”¨äºç½‘é¡µJSè°ƒè¯•çš„æ—¥å¿—
[![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square)](https://github.com/prettier/prettier)

æ—¥å¿—é€šå¸¸ç”¨æˆ·å®šä½ç”¨æˆ·é—®é¢˜çš„æ—¶å€™ä½¿ç”¨ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å‘å¸ƒå‰å°±åœ¨ä»£ç ä¸­è®¾è®¡å¥½ä¸šåŠ¡å…³é”®æµç¨‹æ‰§è¡Œæ—¶éœ€è¦æ‰“å°çš„æ—¥å¿—ã€‚å¦åˆ™ï¼Œå½“æˆ‘ä»¬éœ€è¦å®šä½é—®é¢˜çš„æ—¶å€™ï¼Œæ‰å‘ç°è‡ªå·±å¹¶æ²¡æœ‰è¾“å‡ºç›¸å…³çš„æ—¥å¿—ï¼Œè¿™æ ·å°±ä¼šæ¯”è¾ƒè¢«åŠ¨ã€‚è¿™ä¸ªæ—¶å€™åªå¥½ä¸´æ—¶æ”¹ä»£ç åŠ æ—¥å¿—ï¼Œé‡æ–°å‘å¸ƒã€‚æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™ï¼Œå†å»ä»£ç ä¸­ç›¸åº”ä½ç½®åŠ æ—¥å¿—ï¼Œç”¨æˆ·æ‰§è¡Œæ”¹ä¸šåŠ¡æµç¨‹æ—¶å°±èƒ½ç«‹åˆ»æ‰“å°å‡ºç›¸å…³æ—¥å¿—ï¼Œè€Œä¸ç”¨é‡æ–°èµ°ä¸€éå‘å¸ƒæµç¨‹ã€‚

woodpecker-log æä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå°†æµè§ˆå™¨JSè¯·æ±‚ä»£ç†åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼Œä¿®æ”¹JSå¹¶å‘å¸ƒåˆ°ç›®æ ‡æœåŠ¡å™¨åä½ å¯ä»¥åœ¨ç”¨æˆ·ç«¯éšæ„æ‰“å°ä¸ŠæŠ¥ç”¨äºè°ƒè¯•çš„logã€‚å‰ææ˜¯é’ˆå¯¹ç‰¹å®šJSç›®æ ‡ã€ç‰¹å®šç”¨æˆ·ç”Ÿæ•ˆã€‚

## âš ï¸ æ³¨æ„
å½“å‰è¿˜æœªè¢«ç”Ÿæˆç¯å¢ƒå¤§è§„æ¨¡éªŒè¯ï¼Œçº¿ä¸Šè¯·è°¨æ…ä½¿ç”¨ã€‚

### [DEMO åœ°å€](http://www.00985.vip/woodpecker/)
### å®‰è£…
#### é€šè¿‡ `script` å¤–é“¾æ ‡ç­¾å¼•ç”¨

å°† [dist/wp-log.umd.js](https://github.com/and80506/woodpecker/blob/master/dist/wp-log.umd.js) ç›´æ¥å†…è”åˆ° `<head>` æ ‡ç­¾ä¸­ï¼Œå¹¶ç½®äº**æ‰€æœ‰èµ„æºå¼€å§‹åŠ è½½ä¹‹å‰**ã€‚

#### é€šè¿‡ `script` å†…è”æ ‡ç­¾å¼•ç”¨

ä½¿ç”¨webpackç­‰æ‰“åŒ…å·¥å…·ï¼Œç›´æ¥å°†npmåº“ä¸Šçš„wp-logå†…å®¹ä½¿ç”¨scriptæ ‡ç­¾åŒ…è£¹åç½®äºhtmlçš„ `<head>` æ ‡ç­¾ä¸­ã€‚

### é…ç½®
æä¾›regexå‚æ•°ä»¥æ­£åˆ™åŒ¹é…å¾…è°ƒè¯•JSçš„pathéƒ¨åˆ†ï¼Œå¾—åˆ°å¾…è°ƒè¯•ç›®æ ‡JSæ•°ç»„åï¼Œè¾…åŠ©protocolã€hostå‚æ•°ä»¥æ›¿æ¢æˆä»£ç†æœåŠ¡å™¨JSåœ°å€ã€‚
    foo://example.com:8042/over/there?name=ferret#nose
    \_/   \______________/\_________/ 
     |           |            |       
  protocol     host          path    
- path: æ•°ç»„ç±»å‹ï¼Œè¡¨ç¤ºpathåŒ¹é…è§„åˆ™ï¼Œéå†æ•°ç»„å†…å¯¹è±¡ï¼Œä½¿ç”¨regexåŒ¹é…å¾…è°ƒè¯•JSï¼Œç„¶åä»¥replace(regex, value)çš„æ–¹å¼å°è¯•æ›¿æ¢ç›®æ ‡JSã€‚å¿…é€‰å‚æ•°ã€‚
- protocol: å­—ç¬¦ä¸²ç±»å‹ï¼ŒæŒ‡å®šä»£ç†åJSåœ°å€çš„åè®®ã€‚å¦‚`http:`è¡¨ç¤ºå°†ä»¥httpåè®®ä»ä»£ç†æœåŠ¡å™¨ä¸ŠåŠ è½½JSã€‚å¯é€‰å‚æ•°ã€‚
- host: å¯¹è±¡ç±»å‹ï¼Œè¡¨ç¤ºå°†å¯¹è±¡keyæ›¿æ¢ä¸ºå¯¹è±¡valueã€‚å¦‚`{'example.com': 'log-server.com'}`è¡¨ç¤ºå°†example.comçš„JSä»£ç†åˆ°log-server.comã€‚å¯é€‰å‚æ•°ã€‚
- logLevel: å­—ç¬¦ä¸²ç±»å‹ï¼Œ`'debug', 'info', 'warn', 'error', 'silent'`ã€‚ é»˜è®¤`'info'`ã€‚å¯é€‰å‚æ•°ã€‚
- logProvider: logProviderï¼Œï¼Œé»˜è®¤`window.console`ã€‚å¯é€‰å‚æ•°ã€‚

### å¿«é€Ÿä¸Šæ‰‹
å®‰è£…SDKåï¼Œç®€å•åˆå§‹åŒ–å¾…è°ƒè¯•ç›®æ ‡JSçš„pathè§„åˆ™åŠä»£ç†JSåœ°å€è§„åˆ™å³å¯ã€‚ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼Œ`http://localhost:5000/js/script-1.js`å°†è¢«ä»£ç†æˆ`http://my-log-server.com/js/script-1.log.js`
```html
<script src="../dist/wp-log.umd.js" type="text/javascript"></script>
<script>
    Woodpecker.init({
        path: [
            {
                regex : /\/js\/script-[1,3]/,
                value: '/js/script-1.log',
            },
            {
                regex : /\/js\/script-on-need-1/,
                value: '/js/script-on-need-1.log'
            },
            {
                regex : /\/js\/script-on-need-3/,
                value: '/js/script-on-need-3.log'
            }
        ],
        host: {
            'localhost:5000': 'my-log-server.com',
        },
        protocol: 'http:',
        logLevel: 'debug'
    });
</script>
```
### Demo
å®‰è£…ä¾èµ–å¹¶å¯åŠ¨æœ¬åœ°serveræœåŠ¡:
```bash
$ npm i
$ npm run build
$ npm run examples
```
æŸ¥çœ‹Demoï¼Œæœ¬åœ°æµè§ˆå™¨æ‰“å¼€http://localhost:5000/demo/
æŸ¥çœ‹ç¤ºä¾‹é¡¹ç›®realworld example, http://localhost:5000/examples/realworld/dist/
### å¯è¿è¡Œç¤ºä¾‹é¡¹ç›®
æ‰§è¡ŒDemoçš„npmè„šæœ¬ï¼Œå¦å¤–å†è¿›å…¥examples/realworldé¡¹ç›®å†…è¿è¡Œæ‰“åŒ…è„šæœ¬ã€‚
```bash
# æ‰“åŒ…åŸå§‹JSï¼Œå¾—åˆ°bundle.js
cd examples/realworld
$ npm run build
# ä¿®æ”¹åŸå§‹JSæ·»åŠ log`console.log('test woodpecker-logğŸ˜')`ï¼Œæ‰“åŒ…åå¾—åˆ°bundle.log.js
cd examples/realworld/src/pages/Home/index.js
$ npm run log
```
### æµ‹è¯•
è¿è¡Œå•æµ‹åŠç«¯åˆ°ç«¯æµ‹è¯•:
```bash
$ npm i
$ npm run lint
$ npm run build
$ npm test
$ npm run e2e
```

### æµè§ˆå™¨å…¼å®¹æ€§

| <img src="./demo/images/chrome.png" width="48px" height="48px" alt="Chrome logo"> | <img src="./demo/images/safari.png" width="48px" height="48px" alt="Safari logo"> | 
| :--------------------------------------------------------------------------: | :----------------------------------------------------------------------: | :----------------------------------------------------------------------------: | :---------------------------------------------------------------------------------: | :------------------------------------------------------------------------: | :--------------------------------------------------------------------------: | :-------------------------------------------------------: | :----------------------------------------------------------------------------: |
|                                    47+ âœ”                                     |                                  15+ âœ”                                   |                                     32+ âœ”                                      |                                        10+ âœ”                                        |                                   34+ âœ”                                    |                                    10+ âœ”                                     |                           10+ âœ”                           |                                     4.4+ âœ”                                     |

### ä½¿ç”¨è®¸å¯
The MIT License (MIT)